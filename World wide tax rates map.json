{"$schema": "https://vega.github.io/schema/vega-lite/v5.json",

  "title": {
    "text": "World Map",
    "subtitle":["With tooltip (Country Names). Natural Earth Projection",""],
    "subtitleFontStyle":"italic",
    "subtitleFontSize":10,
    "anchor": "middle",
    "color": "black"
  },



  "config": {
    "background":"white",
    "view": {"stroke": "trasparent"}},
  
  "width": "container",
  "height": 300,
  
  "data": {
    "url": "https://raw.githubusercontent.com/DataScienceLiam/DataScienceLiam.github.io/main/unpkg_World_Map.json",
        "format": {
          "type": "topojson",
          "feature": "countries"}
      },

    "transform": [
      {"calculate":"parseInt(datum.id)", "as":"id_N"},
            {
    "lookup": "id_N",
    "from": {
      "key": "id",
      "fields": ["alpha3", "name"],
      "data": {"url": "https://raw.githubusercontent.com/DataScienceLiam/DataScienceLiam.github.io/main/RDeconomist_dataWorldCountryNamesIDs.json"}}
      },
{
  "lookup": "alpha3",
      "from": {
      "data": {
        "url": "https://raw.githubusercontent.com/DataScienceLiam/DataScienceLiam.github.io/main/Tax%20and%20country%20code%20data.csv"
          },
      "key": "Country code",
      "fields": [
      "Income Tax", "Sales Tax", "Corporation Tax"
      ]
      }
  }

      
      ],    

  "projection": {
    "type": "naturalEarth1",
    "scale": 103,
    "center": [10,0]},
  "mark": {
      "type": "geoshape",
      "stroke": "#323232",
      "strokeWidth":0.45},
  
  "encoding": {
 "color": {
      "field": "Income Tax",
      "type": "quantitative",
        "title": "Income Tax rate",
        "scale": {"scheme": "reds", "domain":[0,60]},
"legend":{
    "orient": "bottom-left",
    "direction": "horizontal"}},
    
    "tooltip":[{"field":"name", "title": "Country"},
{"field":"Income Tax", "title": "Income Tax"},
{"field":"Sales Tax", "title": "Sales Tax"},
{"field":"Corporation Tax", "title": "Corporation Tax"}]
  }


}